<!DOCTYPE html>
{% load staticfiles %}
{% load socialaccount %}
{% load account %}
{% load i18n %}
{% load cfilters %}
{% load notifications_tags %}
{% load thumbnail %}
{% user_display user as user_display %}
<html>
  <head>
    <title>{% block head_title %}{% endblock %}</title>
    {% block extra_head %}
    {% endblock %}
<style type="text/css">
    body {
    display: flex;
    min-height: 100vh;
    flex-direction: column;
  }

  main {
    flex: 1 0 auto;
  }

</style>

  <script src="{% static 'js/jquery-1.12.3.js' %}"
  integrity="sha256-1XMpEtA4eKXNNpXcJ1pmMPs8JV+nwLdEqwiJeCQEkyc="
  crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'css/materialize.min.css' %}">
  <script src="{% static 'js/materialize.min.js' %}"></script>
    <script src="https://use.fontawesome.com/6dc1b79a56.js"></script>

  <link href="{% static 'css/icons.css' %}" rel="stylesheet">
  <link href="{% static 'css/base.css' %}" rel="stylesheet">
  <script src="{% static 'js/main.js' %}"></script>
  <script src="{% static 'js/notif.js' %}"></script>
  <script src="{% static 'notifications/notify.js' %}" type="text/javascript"></script>
  {% register_notify_callbacks refresh_period=50 badge_id='notifications' callbacks='fill_notification_badge,my_notification_callback' %}

  </head>
  <body>

  <nav>
    <div class="nav-wrapper">
   
      <ul id="nav-mobile" class="right">
        <li>
          <a href="{% url 'cart:viewcart' %}" class="waves-effect waves-light btn-large transparent z-depth-0"><i class="material-icons left">shopping_cart</i><span id="cartcount" style="margin-left:-15px;">{{ request.session.products|length }}</span></a>
          
        </li>

        {% if user_display %}
        <li style="margin-left: -50px;">
          <a onclick="readall()" class="waves-effect waves-light btn-large transparent z-depth-0 dropdown-button" data-activates='nl' data-beloworigin="true" data-constrainwidth="false"><i class="material-icons left">notifications</i>
          <span style="margin-left:-15px;">&nbsp
            {% live_notify_badge  badge_id='notifications' classes='green-text' %}
          </span></a>
          
        </li>
         <ul id='nl' class='dropdown-content collection'>

        </ul>
        {% endif %}


        
        {% if user_display %}
        <li style="margin-left: -70px;">
          <a class='dropdown-button btn transparent z-depth-0' data-gutter="10px" data-beloworigin="true" href='#' data-activates='dropdown-user'>
            <div class="chip transparent ">
              {% if request.user.socialaccount_set.all.0 %}
              <img src="{{ request.user.socialaccount_set.all.0.get_avatar_url }}" alt="Contact Person">
            {% else %}
                    {% thumbnail user.user_information.change_profile_pic "100x100" as im %}
            <img src="{{ im.url }}" alt="Contact Person">
              {% endthumbnail %}

            {% endif %}
              {{ request.user|getfullname }}<br/>
            </div></a>
            <ul id='dropdown-user' class='dropdown-content'>
              
              <li><a href="{% url 'cart:viewwishlist' %}">Wish List</a></li>
              <li><a href="{% url 'social:myprofile' %}">My Profile</a></li>
              <li><a href="{% url 'social:viewallusers' %}">Social</a></li>
              <li><a href="{% url 'authentication:change_settings' %}">Settings</a></li>
              <li><a href="{% url 'account_logout' %}">Logout</a></li>
            </ul>
          </li>

          {% else %}  
          <li>
           <a href = "{% url 'account_login' %}" class="waves-effect waves-light btn">Login or Signup</a>
         </li>
         {% endif %}

       </ul>


     {% block breadcumb %}
      
      {% endblock %}

    </div>
  </nav>
  <main>
    

    

    {% block content %}
    {% endblock %}
    

    {% block extra_body %}
    {% endblock %}
  

  </main>

  </body>
 <footer class="page-footer">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <h5 class="white-text">Footer Content</h5>
                <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            Â© 2014 Copyright Text
            <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
            </div>
          </div>
        </footer>
</html>
