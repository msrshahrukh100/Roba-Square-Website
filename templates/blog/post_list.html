{% extends "allauth/base.html" %}
{% block content %}
{% load cfilters %}

{% block breadcumb %}

<div class="col s12" style="padding-left:50px;">
        <a href="/" class="breadcrumb">Home</a>
        <a class="breadcrumb" >Blogs</a>
</div>
{% endblock %}

<div class="container">
    


    <h4 class="center">Blogs on Robasquare</h4>
<form method='GET' action=''>
<div class="row">
<div class="input-field col s8">
<i class="material-icons prefix">search</i>
<input id="searchblogs" type='text' name='q'  value='{{ request.GET.q }}'/>
<label for="searchblogs">Search Blogs</label> 
</div>

<button class="btn waves-effect waves-light" type="submit" name="action">Search
  </button>
<!-- <input type='submit' class="col s2" value='Search' /> -->

</div>
</form>
<p>To contribute for blog posts on Roba Square<a href="{% url 'blog:post_create' %}"> click here</a></p>
{% for obj in object_list %}

<div class="row">
        <div class="col s12 m12">
          <div class="card small">
            <div class="card-image">
                {% if obj.image %}
                 <img src='{{ obj.image.url }}' class='responsive-img' />
                {% endif %}
            </div>
            <div class="card-action">
              <span class="badge blue black-text">Viewed {{ obj.get_views_count }} times</span>
              <p>
              <h5><a style="text-transform: none;" href='{{ obj.get_absolute_url }}'>{{ obj.title }}</a></h5>

              {% if request.user == obj.user %}
              <a style="text-transform: none;" href="{% url 'blog:update' slug=obj.slug %}">Edit</a>
              <a style="text-transform: none;" class="red-text" onclick="return confirm('Are you sure you want to delete this post?');" href="{% url 'blog:delete' slug=obj.slug %}">Delete Post?</a>
              <br>
              {% endif %}
              By <a style="text-transform: none;" class="green-text" href="{{ obj.user.user_information.get_absolute_url }}">{{ obj.user|getfullname }}</a><span class="right grey-text">Pubished: {{ obj.timestamp|timesince }} ago</span></p>
            </div>
          </div>
        </div>
      </div>
            
{% endfor %}


<ul class="pagination center">
  {% if object_list.has_previous %}
            <li class="waves-effect"><a href="?{{ page_request_var }}={{ object_list.previous_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}"><i class="material-icons">chevron_left</i></a></li>
      {% else %}
    <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
  {% endif %}
  {% for i in nopages %}
  {% if i == object_list.number %}
    <li class="active"><a href="#!">{{ i }}</a></li>
    {% else %}
    <li class="waves-effect"><a href="?{{ page_request_var }}={{ i }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}">{{ i }}</a></li>
    {% endif %}
    {% endfor %}

    {% if object_list.has_next %}
    <li class="waves-effect"><a href="?{{ page_request_var }}={{ object_list.next_page_number }}{% if request.GET.q %}&q={{ request.GET.q }}{% endif %}"><i class="material-icons">chevron_right</i></a></li>
    {% else %}
    <li class="disabled"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
        {% endif %}
  </ul>
            
            <hr/>

{% for obj in my_contributions %}
<h4>My Contributions</h4>
<div class="row">
        <div class="col s12 m12">
          <div class="card small" style="max-height: 170px;">
            <div class="card-content">
            {% if obj.publish_it %}
            <span class="badge blue black-text">Viewed {{ obj.get_views_count }} times</span>
            {% else %}
              <span class="badge pink black-text">Pending review</span>
              {% endif %}
              <p>
              <h5><a style="text-transform: none;" href='{{ obj.get_absolute_url }}'>{{ obj.title }}</a></h5>

              {% if request.user == obj.user %}
              <a style="text-transform: none;" href="{% url 'blog:update' slug=obj.slug %}">Edit</a>
              <a style="text-transform: none;" class="red-text" onclick="return confirm('Are you sure you want to delete this post?');" href="{% url 'blog:delete' slug=obj.slug %}">Delete Post?</a>
              <br>
              {% endif %}
              By <a style="text-transform: none;" class="green-text" href="{{ obj.user.user_information.get_absolute_url }}">{{ obj.user|getfullname }}</a><span class="right grey-text">Submitted {{ obj.timestamp|timesince }} ago</span></p>
            </div>
          </div>
        </div>
      </div>
            
<hr/>

{% endfor %}


</div>



{% endblock content %}