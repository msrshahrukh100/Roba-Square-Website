{% extends "index.html" %}
{% block title %}View title{% endblock %}
{% load crispy_forms_tags %}

{% block browser %}&nbsp{% endblock %}
{% block content %}


     {% block breadcumb %}
      {% if type == 1 %}
    <div class="col s12" style="padding-left:50px;">
        <a href="/" class="breadcrumb">Home</a>
        <a class="breadcrumb" >{{ cname }}</a>
    </div>
    {% else %}
    <div class="col s12" style="padding-left:50px;">
        <a href="/" class="breadcrumb">Home</a>
        <a href="{{ detailp.category.get_absolute_url }}" class="breadcrumb">{{ detailp.category.category }}</a>
        <a class="breadcrumb" >{{ detailp.name }}</a>
    </div>
      {% endif %}  
      {% endblock %}



{% if type == 1 %}


<div class="row">
  {% for p in products %}
  <div class="{% cycle 'col s12 m6 l3 offset-l1' 'col s12 m6 l3' 'col s12 m6 l3 ' %}">
    <div class="card medium hoverable">
      <div class="card-image waves-effect waves-block waves-light">
        <img class="activator" src="{{ p.get_image_url }}
"></div>
      <div class="card-content">
        <span class="card-title activator grey-text text-darken-4">
          {{ p.name }} <i class="material-icons right">more_vert</i>
        </span>
        <p>
          <a href="{{ p.get_absolute_url }}">This is a link</a>
          {{ p.price }}
          {{ p.stockcount }}
          {{ p.gender }}
          {{ p.new_product }}
        </p>
        {% if incart %}
        <a href='{{ p.get_delete_cart_url }}' class="">Remove from cart</a>
        {{ p.get_delete_cart_url }}
        {% else %}
        <a data-href='{{ p.get_add_to_cart_url }}' class="addtocart">Add to cart</a>
        {% endif %}
        <p>{{ p.get_add_to_cart_url }}</p>
        {% if inwl %}
        <a href='{{ p.get_delete_wishlist_url }}'>Remove from Wish List</a>
        {{ p.get_delete_wishlist_url }}
        {% endif %}
        {% if request.user and not inwl%}

        <a data-href='{{ p.get_add_to_wishlist_url }}' class="addtocart">Add to wishlist</a>
        <p>{{ p.get_add_to_wishlist_url }}</p>
        {% endif %}

      </div>
      <div class="card-reveal">
        <span class="card-title grey-text text-darken-4">
          {{ p.name }} <i class="material-icons right">close</i>
        </span>
        <p>
          {{ p.description }}
        </p>
      </div>
    </div>

  </div>
  

{% endfor %}

  </div>


  <div class="fixed-action-btn">
    <a class="btn-floating btn-large red">
      <i class="large material-icons">mode_edit</i>
    </a>
    <ul>
      <li><a class="btn-floating red"><i class="material-icons">insert_chart</i></a></li>
      <li><a class="btn-floating yellow darken-1"><i class="material-icons">format_quote</i></a></li>
      <li><a class="btn-floating green"><i class="material-icons">publish</i></a></li>
      <li><a class="btn-floating blue"><i class="material-icons">attach_file</i></a></li>
    </ul>
  </div>

  

  {% else %}



     <div class="row">
        <div class="col l5 s6 m5 offset-l1 offset-m1">
          <div class="card z-depth-0">
            <div class="card-image">
              <img src="{{ detailp.get_image_url }}">
            </div>
            <div class="card-action">
              <a href="#">This is a link</a>
              <a data-href='{{ detailp.get_add_to_cart_url }}' class='addtocart'>Add to cart</a>

              {% if request.user %}
              <a data-href='{{ detailp.get_add_to_wishlist_url }}' class='addtocart'>Add to wishlist</a>
              {{ detailp.get_add_to_wishlist_url }}
              {% endif %}
            </div>
          </div>
        </div>

      <div class="col l5 s6 m5">
        <div class="card-panel white card z-depth-0">
        <h2>
          {{ detailp.name }}
        </h2>
          <span >{{ detailp.description }}
                  {{ detailp.price }}
                {{ detailp.stockcount }}
                {{ detailp.gender }}
                {{ detailp.new_product }}
          </span>

        {% for im in detailp.prod.all %}
        {{ im.size }}
        {{ im.color }}
        {{ im.productimages.all }}
        {% endfor %}

        </div>
      </div>
      </div>

  
      <form method="post" action="{% url 'review:addreview' %}">{% csrf_token %}
        {{ form.product }}
     
      <div class="row">
        <div class="col l5 m5 s12 offset-m1 offset-l1">
        {{ form.review.errors }}
        <label for="id_review">Share your review</label>
          {{ form.review }}
        </div>
        <div class="col l3 m3 s6 range-field">
          {{ form.rating.errors }}
          <label for="id_rating">Rating</label>
          {{ form.rating }}
          <!-- <input type="range" id="test5" min="0" max="10" /> -->
        </div>
        <div class="col l2 m2 s6">
          <button class="btn waves-effect waves-light" type="submit" name="action">Add
          <i class="material-icons right">send</i>
        </button> 
        </div>
      </div>

      </form>
      {% for review in detailp.reviews.all %}
      <p>
      {{ review.user }}
      {{ review.review }}
      {{ review.rating }}
      {% if request.user == review.user %}
      <a href="{{ review.get_delete_review_url }}">Delete post</a>
      {% endif %}
      </p>
      {% endfor %}


{% endif %}

{% endblock %}